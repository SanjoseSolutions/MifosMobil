<!--
    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as
    published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<!--
  This template loads for the 'tab.friend-detail' state (app.js)
  'friend' is a $scope variable created in the FriendsCtrl controller (controllers.js)
  The FriendsCtrl pulls data from the Friends service (service.js)
  The Friends service returns an array of friend data
-->
<style type="text/css">
.myEdit {
  height: 50%;
  padding-top: 0;
  padding-bottom: 0;
  margin-top: 0;
  margin-bottom: 0;
}
</style>
<ion-view view-title="Client: {{client.displayName}}">
  <ion-nav-buttons side="right">
      <a class="button button-outline button-icon rightBtn"
          href="#/tab/clients/{{client.id}}/edit" title="Edit Client Infos">
        <i class="icon ion-edit"> Edit</i>
      </a>
  </ion-nav-buttons>
  <ion-content id="client-details">
    <!-- a href="#/tab/clients/{{client.id}}/edit" class="button button-block w20 rightBtn">
      <label><i class="ion-edit"></i></label>
    </a -->

    <div class="list card" style="clear:both;">
      <!-- To Prevent long Name to be cut -->
      <ion-item class="item item-divider">
        <label class="positive">{{client.displayName}}</label>
        <!-- a href="#/tab/clients/{{client.id}}/edit"
            class="button button-clear button-positive w20 rightBtn icon ion-edit myEdit"
            style='clear:both;'>  float:right; font-size: 1rem;' &nbsp;  + Edit >
            < ! - - label><i class="ion-edit"> Edit</i></label >
        </a -->
      </ion-item>

      <div class="item item-avatar custom">
        <img ng-src="{{client.face}}">
        <!-- h2>{{client.displayName}}</h2 -->   
        <p><b>Gender</b>:{{client.gender.name}}</p>
        <p><b>Marital Status:</b> {{client.Client_Fields["Marital Status"] || "Not set"}}</p>
        <p><b>D.O.B:</b> {{client.dateOfBirth}}</p>
        <!-- To Prevent long names to be cut -->
        <p><b>Office:</b> # {{client.officeId}} <br /> {{client.officeName}}</p>
        <p><b>Created:</b> {{client.createdOnDate}}</p>
        <p><b>Membership :</b>
          <!-- i class="icon ion-person-add"></i -->
          {{ client.clientType.name || "Not set" }}</p>
        <!-- p><label><i class="icon ion-android-call"></i></label> {{client.mobileNo || "9876543210"}}</p -->
      </div>

      <div class="button-bar">
        <a ng-click="getPhoto()" class="button button-clear button-positive icon ion-camera">
          Photo </a>
        <a ng-click="print()" class="button button-clear button-positive icon ion-printer">
          Print </a>
        <!-- a class="button button-clear button-positive icon ion-document">
          Upload</a -->
        <a href="#/tab/clients/{{client.id}}/edit" class="button button-clear button-positive icon ion-edit">Edit</a>
      </div>

    </div>
    <div class="list card no-text-wrap">
      <ion-item class="item item-icon-left">
        <!-- ion-ios-email-outline" -->
        <label class="icon ion-email"></label>
        {{client.Client_Fields.Email || "Not set" }}
        <!-- "extremelysimple@kmayra.org" -->
      </ion-item>

      <ion-item class="item item-icon-left centered"> <!-- item-button" -->
        <!-- button class="button button-small button-positive leftBtn" ng-show="client.mobileNo">
          Write SMS <i class="icon ion-ios-email-outline"></i>
        </button -->
        <i class="icon ion-android-call"></i> <!-- ng-show="!client.mobileNo"></i -->
        <strong class="positive">{{client.mobileNo || "Not Set"}}</strong>
        <!--span class="centered">{{client.mobileNo || "9876543210"}}</span -->
        <a class="button button-small button-positive rightBtn"
            ng-href="tel:{{client.mobileNo}}"
            ng-show="client.mobileNo">
          <!-- i class="icon ion-android-call"></i -->
          Make Call
        </a>
      </ion-item>
      <ion-item class="item item-icon">
        <label>Education <i class="icon ion-university"></i> </label>:
        {{client.Client_Fields.Education || "Not set"}}
      </ion-item>    
      <ion-item>
        <label>Occupation</label>:
        {{client.clientClassification.name || "Not set"}}
      </ion-item>
      <!-- /ion-list -->
    </div>
    <div class="list card">        
      <ion-item>
        <a href="#/tab/clients/{{client.id}}/docs" class="button button-block">
          <i class="ion-document-text"> Documents</i></a>
      </ion-item>
      
      <!-- Family Member Size -->
      <ion-item class="item-divider item-icon-right"> 
        <label> Family Size &amp; Details
          <i class="icon ion-ios-people"></i>
        </label>
      </ion-item>
      <ion-item>
        <div class="item row">
          <div class="col">
            <label> Males: </label>
            {{client.Client_Fields['Number of males'] || "Not set"}}
          </div>
          <div class="col">
            <label> Females: </label>
            {{client.Client_Fields['Number of females'] || "Not set"}}
          </div>
        </div>
      </ion-item>
      <ion-item>
        <label>Father's Name</label>:
        {{client.Client_Fields["Fathers Name"] || "Not set"}} <br />
        <label>Gd Father's Name</label>:
        {{client.Client_Fields["Grandfathers Name"] || "Not set"}}
      </ion-item>
      <ion-item>
        <label>Next of kin:</label>
        <a href="#/tab/clients/{{client.id}}/next-of-kin"
            class="button button-small button-positive button-outline button-icon icon-right ion-search">
          {{client.Client_NextOfKin.Fullname || "Unspecified"}}
        </a>
      </ion-item>
      <ion-item class="item item-divider item-icon-right">
        <label> Client's Address <i class="icon ion-ios-home"></i></label>
      </ion-item>
      <ion-item>
        {{client.Client_Fields.Address || "Address Field Not set" }}
        <!-- "45, Av. de la Rue, Bourguignon, France" -->
      </ion-item>
      <ion-item class="item item-body">
        <label>Country</label>:
        {{client.Client_Fields.Country || "Not set" }} <br />
        <label>Region</label>:
        {{client.Client_Fields.Region || "Not set" }} <br />
        <label>Zone</label>:
        {{client.Client_Fields.Zone || "Not set" }} <br />
        <label>Wereda</label>:
        {{client.Client_Fields.Wereda || "Not set" }} <br />
        <label>Kebele</label>:
        {{client.Client_Fields.Kebele || "Not set" }} <br />
        <label>Unique Place Name</label>:<br />
        {{client.Client_Fields.UniquePlaceName || "Not set" }}
      </ion-item>
      <ion-item>
        <a href="#/tab/clients/{{client.id}}/edit" class="button button-block">
          <label><i class="ion-edit"> Edit Info</i></label>
        </a>
      </ion-item>
    </div>

    <div class="list card">
      <ion-item ng-show="client.pending && (rolestat.isAdmin || rolestat.isManagement)">
        <ion-button-bar>
          <button class="button button-assertive leftBtn"
              ng-click="rejectClient(client)">
            Reject
            <i class="icon ion-close-round"></i>
          </button>
          <button class="button button-positive rightBtn"
              ng-click="approveClient(client)">
            Approve
            <i class="icon ion-android-checkmark-circle"></i>
          </button>
        </ion-button-bar>
    </div>

    <div class="card">
      <div class="item item-divider">
        Financial Summary
      </div>
      <div class="item item-text-wrap no-padding">
          <ion-item>
             <label>Savings Accounts:</label>
             <span ng-hide="client.savingsAccounts">(None)</span>
              <a href="#/tab/clients/{{client.id}}/savings-apply" class="button positive rightBtn">
                Apply
              </a>
             <table style="width:95%">
             <tbody>
              <tr ng-repeat="sac in client.savingsAccounts">
                <td width="30%"><strong>{{sac.productName}}</strong></td>
                <td><a href="#/tab/savingsAccount/{{sac.id}}">{{sac.accountNo}}</a></td>
                <td><span class="icon ion-social-bitcoin">{{sac.accountBalance}}</span></td>
                <td><a href="#/tab/savingsAccount/{{sac.id}}/transactions">Transactions</a></td>
              </tr>
             </tbody>
             </table>
             <!--i class="icon ion-social-bitcoin">
             {{client.TotalSavings || "25"}}</i-->
          </ion-item>
          <ion-item>
            <label>Loans:</label>
            <span ng-hide="client.loanAccounts.length">(None)</span>
            <a href="#/tab/clients/{{client.id}}/loan-apply"
                class="button button-positive rightBtn">
              Apply
            </a>
            <br />
            <table style="width:95%">
            <tbody>
              <tr ng-repeat="lac in client.loanAccounts">
                <td width="30%"><strong>{{lac.productName}}</strong></td>
                <td><a href="#/tab/loan/{{lac.id}}">{{lac.accountNo}}</a></td>
                <td><span class="icon ion-social-bitcoin">{{lac.loanBalance}}</span></td>
                <td><a href="#/tab/loan/{{lac.id}}/transactions">Transactions</a></td>
              </tr>
            </tbody>
            </table>
          </ion-item>
      </div>
      <!-- ion-item>
        <label>Share Holdings:</label>
        {{client.NumShares || "0"}}
        <a href="#/tab/#" class="button positive rightBtn"> <strong> Buy </strong> </a>
      </ion-item -->
    </div>

  </ion-content>
</ion-view>
