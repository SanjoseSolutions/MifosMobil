<!--
    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as
    published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<ion-view view-title="Clients">

  <ion-nav-buttons side="right">
      <a class="right button button-icon" href="#/tab/client-register"
          title="Register Client">
        <i class="icon ion-person-add"></i>
        <i class="icon ion-android-add"></i>
      </a>
  </ion-nav-buttons>

  <div class="bar bar-subheader item-input-inset">
    <i style="font-size:130%" class="icon ion-skip-backward" ng-click="scrollTop()"></i>
    <label class="item-input-wrapper">
      <i class="icon ion-search placeholder-icon"></i>
      <input type="search" ng-model="searchQuery" placeholder="Search ..." />
    </label>
    <i style="font-size:130%" class="icon ion-skip-forward" ng-click="scrollBottom()"></i>
  </div>

  <ion-content class="has-subheader">
    <ion-refresher on-refresh="fetchNewClients()"></ion-refresher>
    <ion-list>
      <!-- ion-item class="item item-divider">Clients List
        <a href="#/tab/client-register" class="button icon ion-person-add"
          title="Register Client" style="float: right; font-size: 25px">&nbsp;+
        </a>
      </ion-item -->

      <ion-item ng-class="{'iClient': !client.active}"
          class="item item-remove-animate item-avatar item-icon-left item-icon-right"
          ng-repeat="client in clients | filter : searchQuery" type="item-text-wrap" href="#/tab/clients/{{client.id}}" ng-if="client.status.value != 'Rejected'">
        <img ng-src="{{client.face}}" >
        <h2>#{{client.id}}: {{client.displayName}}</h2>
        <p> 
          <!-- {{client.fullname}} -->
          Loans: {{clientOutstanding[client.id] || "NONE"}} |
          Savings: {{clientSavings[client.id] || "NONE"}}
        </p>

        <i class="icon ion-chevron-right icon-accessory"></i>

        <ion-option-button class="button-assertive" ng-click="remove(client)">
          Delete
        </ion-option-button>

      </ion-item>
    </ion-list>
  </ion-content>
</ion-view>
